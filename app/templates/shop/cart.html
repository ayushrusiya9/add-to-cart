{% extends 'shop/base.html' %}
{% block content %}
<h2>My Cart</h2>
{% if items %}
<ul class="list-group">
  {% for it in items %}
  <li class="list-group-item d-flex justify-content-between">
    {{ it.product.name }} (x{{ it.quantity }})
    <div>
      <span>₹ {{ it.subtotal }}</span>
      <a href="{% url 'remove' product_id=it.product.id %}" class="btn btn-light"> Remove</a>
    </div>
  </li>
  {% endfor %}
</ul>
<form action="{% url 'payment' %}" method="post" class="mt-3">
  {% csrf_token %}
  <h4 class="mt-3">Total: ₹ {{ total }}</h4>
  <input type="number" name="amount" value="{{ total }}" hidden>
  <button class="btn" style="color: black; background: gray; border: none; border-radius: 12px; width: 100px;">
    Pay Now</button>
</form>
{% if payment %}
<form action="{% url 'payment-status' %}" method="post">
  {% csrf_token %}
  <script src="https://checkout.razorpay.com/v1/checkout.js"
    data-key="rzp_test_RNMrrOvCpxy6Gi"
    data-amount="{{ payment.amount }}"
    data-currency="{{ payment.currency }}"
    data-order_id="{{ payment.id }}"
    data-buttontext="Pay with Razorpay"
    data-name="Neeraj Ecom"
    data-description="Thank you for visiting My Site"
    data-image="https://example.com/your_logo.jpg"
    data-prefill.name="Neeraj Kumar"
    data-prefill.email="Neeraj.Patel@gmail.com"
    data-theme.color="#2520adff">
  </script>
</form>
{% endif %}
{% else %}
<p>Your cart is empty</p>
{% endif %}
{% endblock %}